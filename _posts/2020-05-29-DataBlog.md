*Introduction*

Hello! If you do not know already, my name is Brandon Hoenig and I am a
PhD Candidate studying the diet and development of nestling songbirds.
In my work, I have to handle large amounts of data, consisting of
hundreds of individual nestlings, thousands of measurements, and tens of
millions of DNA sequences. For the hundreds or even thousands of data
points, Microsoft Excel may be enough. However, when we have to wrangle
in millions of datapoints, we must turn to R. Additionally, R allows us
to reproduce and share our analyses with other researchers.

*Starting to analyze your data*

When you begin your data analysis phase, you will likely start by
filtering your data, grouping observations into different experimental
groups, and gaining some simple summary statistics to better familiarize
yourself with your data. In today's post, we will be going over how to
do these actions using the 'filter()', 'group\_by()' and 'summarize()'
functions within the *tidyverse* family of packages.

**Load the *tidyverse* library**

    library(tidyverse)

    ## ── Attaching packages ─────────────────────────────────────────────────────────────────────────── tidyverse 1.3.0 ──

    ## ✓ ggplot2 3.3.0     ✓ purrr   0.3.3
    ## ✓ tibble  2.1.3     ✓ dplyr   0.8.5
    ## ✓ tidyr   1.0.0     ✓ stringr 1.4.0
    ## ✓ readr   1.3.1     ✓ forcats 0.4.0

    ## ── Conflicts ────────────────────────────────────────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

Today, we'll be working with data retrieved from
[Kaggle](https://www.kaggle.com/drgilermo/nba-players-stats/data?select=player_data.csv)
that details over 4,000 NBA players. Sports are a wonderful source of
data, so if you ever want to practice your data analysis skills, I'd
suggest looking into sport-related datasets.

**Load our data**

    playerData <- 
      read_csv('player_data.csv')

    ## Parsed with column specification:
    ## cols(
    ##   name = col_character(),
    ##   year_start = col_double(),
    ##   year_end = col_double(),
    ##   position = col_character(),
    ##   height = col_character(),
    ##   weight = col_double(),
    ##   birth_date = col_character(),
    ##   college = col_character()
    ## )

Now, data analysis for the sake of data analysis can be fun, but we need
to make sure we have a direction for our analysis. The first thing that
I do is take a look at the data with the 'head()' function. This allows
us to look at the first 6 columns and rows of our data.

**Look at the head of our data**

    head(playerData)

    ## # A tibble: 6 x 8
    ##   name      year_start year_end position height weight birth_date  college      
    ##   <chr>          <dbl>    <dbl> <chr>    <chr>   <dbl> <chr>       <chr>        
    ## 1 Alaa Abd…       1991     1995 F-C      6-10      240 June 24, 1… Duke Univers…
    ## 2 Zaid Abd…       1969     1978 C-F      6-9       235 April 7, 1… Iowa State U…
    ## 3 Kareem A…       1970     1989 C        7-2       225 April 16, … University o…
    ## 4 Mahmoud …       1991     2001 G        6-1       162 March 9, 1… Louisiana St…
    ## 5 Tariq Ab…       1998     2003 F        6-6       223 November 3… San Jose Sta…
    ## 6 Shareef …       1997     2008 F        6-9       225 December 1… University o…

We can see that one of the variables is 'college' and this will give us
a good chance to utilize the 'filter()' function to remove some of the
data. One of favorite colleges growing up was the University of
Pittsburgh so lets take a look at all of the players in our dataset that
went to the University of Pittsburgh.

**Using the 'filter()' function**

    playerData %>%
      filter(college == 'University of Pittsburgh')

    ## # A tibble: 19 x 8
    ##    name      year_start year_end position height weight birth_date   college    
    ##    <chr>          <dbl>    <dbl> <chr>    <chr>   <dbl> <chr>        <chr>      
    ##  1 Steven A…       2014     2018 C        7-0       255 July 20, 19… University…
    ##  2 Jamel Ar…       2018     2018 G-F      6-7       213 January 12,… University…
    ##  3 Mel Benn…       1976     1982 F        6-7       200 January 4, … University…
    ##  4 DeJuan B…       2010     2016 F-C      6-7       270 April 22, 1… University…
    ##  5 Mark Blo…       2001     2009 C        7-0       230 November 30… University…
    ##  6 Vonteego…       2000     2002 G        6-3       185 February 29… University…
    ##  7 Joe Fabel       1947     1947 F-G      6-1       190 September 4… University…
    ##  8 Aaron Gr…       2008     2014 C        7-0       270 December 7,… University…
    ##  9 Thomas H…       1996     2000 C        7-2       330 April 3, 19… University…
    ## 10 Billy Kn…       1975     1985 G-F      6-6       195 June 9, 1952 University…
    ## 11 Brandin …       2005     2005 G        6-0       180 December 16… University…
    ## 12 Jerome L…       1989     1993 F        6-6       230 December 4,… University…
    ## 13 Eric Mob…       1995     1997 C        6-11      235 February 1,… University…
    ## 14 Darren M…       1994     1994 C        6-10      235 April 22, 1… University…
    ## 15 Lamar Pa…       2016     2017 G-F      6-5       225 August 12, … University…
    ## 16 Charles …       1989     1997 F-C      6-10      230 July 16, 19… University…
    ## 17 Keith St…       1977     1977 G-F      6-6       190 March 14, 1… University…
    ## 18 Chris Ta…       2006     2006 F        6-10      260 March 10, 1… University…
    ## 19 Sam Young       2010     2013 F        6-6       220 June 1, 1985 University…

So lets go over what we have above:

In the first line we have

    playerData %>%
      ...

The 'playerData' is just what we named our dataframe above, but what is
that '%&gt;%' after it?

The pipe function (%&gt;%) is a cool function of the tidyverse that
allows us to take what came before the pipe (i.e. playerData) and *pipe*
it into whatever comes after it! The equivalent of this would be to do
this:

    filter(.data = playerData, 
           college == 'University of Pittsburgh')

    ## # A tibble: 19 x 8
    ##    name      year_start year_end position height weight birth_date   college    
    ##    <chr>          <dbl>    <dbl> <chr>    <chr>   <dbl> <chr>        <chr>      
    ##  1 Steven A…       2014     2018 C        7-0       255 July 20, 19… University…
    ##  2 Jamel Ar…       2018     2018 G-F      6-7       213 January 12,… University…
    ##  3 Mel Benn…       1976     1982 F        6-7       200 January 4, … University…
    ##  4 DeJuan B…       2010     2016 F-C      6-7       270 April 22, 1… University…
    ##  5 Mark Blo…       2001     2009 C        7-0       230 November 30… University…
    ##  6 Vonteego…       2000     2002 G        6-3       185 February 29… University…
    ##  7 Joe Fabel       1947     1947 F-G      6-1       190 September 4… University…
    ##  8 Aaron Gr…       2008     2014 C        7-0       270 December 7,… University…
    ##  9 Thomas H…       1996     2000 C        7-2       330 April 3, 19… University…
    ## 10 Billy Kn…       1975     1985 G-F      6-6       195 June 9, 1952 University…
    ## 11 Brandin …       2005     2005 G        6-0       180 December 16… University…
    ## 12 Jerome L…       1989     1993 F        6-6       230 December 4,… University…
    ## 13 Eric Mob…       1995     1997 C        6-11      235 February 1,… University…
    ## 14 Darren M…       1994     1994 C        6-10      235 April 22, 1… University…
    ## 15 Lamar Pa…       2016     2017 G-F      6-5       225 August 12, … University…
    ## 16 Charles …       1989     1997 F-C      6-10      230 July 16, 19… University…
    ## 17 Keith St…       1977     1977 G-F      6-6       190 March 14, 1… University…
    ## 18 Chris Ta…       2006     2006 F        6-10      260 March 10, 1… University…
    ## 19 Sam Young       2010     2013 F        6-6       220 June 1, 1985 University…

While both of these options give us the correct answer, I prefer to use
the pipe as it allows us to string together multiple functions without
having to continually rename the variables. Later on, I'll show the
utility of pipe function when we do multiple actions (i.e. filter *and*
group our data).

Back to our data. We can see after the first line, that we have the:

    ...
    filter(college == 'University of Pittsburgh')

This portion is where the magic happens. We are using the 'filter'
function to sort our data by college and keeping only those data where
college is equal to ''. Now, while we chose the variable 'college' to
work with, we could have chosen any of the data points.

Let's re-do this, but instead of filtering on a discrete variable, let's
filter based on a continuous one.

In this example, we want to only keep players who's weight is higher
than 280 pounds (the big boys). To do this, we'll do:

    playerData %>%
      filter(weight > 280) %>%
      view()

Though our dataset has over 4500 players, only 27 are over 280 pounds!

Now, what if we want to filter on multiple cases? There are two options!

The first option uses a pipe to move our output front the first
'filter()' function to the next 'filter()' function, like this:

    playerData %>%
      filter(college == 'University of Pittsburgh') %>%
      filter(weight > 280)

    ## # A tibble: 1 x 8
    ##   name      year_start year_end position height weight birth_date  college      
    ##   <chr>          <dbl>    <dbl> <chr>    <chr>   <dbl> <chr>       <chr>        
    ## 1 Thomas H…       1996     2000 C        7-2       330 April 3, 1… University o…

While I am certain that many data analysts would suggest against this
option as it increases the redundancy, I would utilize this option as it
allows me to see the steps within my analysis pipeline.

-   1.  Calls 'playerData'

-   1.  filters so that only players who went to the University of
        Pittsburgh appear

-   1.  filters so that only players that weigh more than 280 (i.e.
        Thomas Hamilton) appear

The other option is:

    playerData %>%
      filter(college == 'University of Pittsburgh', 
             weight > 280)

    ## # A tibble: 1 x 8
    ##   name      year_start year_end position height weight birth_date  college      
    ##   <chr>          <dbl>    <dbl> <chr>    <chr>   <dbl> <chr>       <chr>        
    ## 1 Thomas H…       1996     2000 C        7-2       330 April 3, 1… University o…

This method also works and it is likely that you will go with this
method moving forward. However, if you're here learning about data
analysis, its likely that you'll want to know all of your options and go
from there.

Now, filtering data is one method of keeping data we want and removing
data we don't, but what if we want to keep all of the data, but just
look at it in groups? To do that, we'll have to use the 'group\_by()'
function.

\*\* Using the 'group\_by()' function\*\*
